# Story FB-1.10: Add Unit Tests for Models

**Story ID**: FB-1.10  
**Epic**: Epic 1 - Field Data Structures  
**Story Points**: 13  
**Priority**: P2  
**Status**: Not Started  

## Description
Create comprehensive unit tests for all model classes to ensure correctness, validate edge cases, and establish a testing baseline for future development.

## Acceptance Criteria
- [ ] Create JUnit tests for `FarmField` validation
- [ ] Create tests for `FieldGrid` boundary detection
- [ ] Create tests for subdivision calculations
- [ ] Create tests for tile state tracking
- [ ] Create tests for JSON serialization/deserialization
- [ ] Test edge cases: empty fields, invalid coordinates, null values
- [ ] Achieve >80% code coverage for model classes
- [ ] Add test data fixtures for common scenarios

## Technical Notes
- May need to set up JUnit in `build.xml` if not already present
- Create test resources in `test/resources/`
- Mock Haven-specific dependencies (Coord2d, etc.)
- Use JUnit 4 (already in project) or upgrade to JUnit 5 if needed

**Example test structure**:
```java
public class FarmFieldTest {
    @Test
    public void testFieldCreation() {
        FarmField field = new FarmField("Test", FieldType.QUALITY, FieldShape.CIRCLE);
        assertNotNull(field.getId());
        assertEquals("Test", field.getName());
        assertTrue(field.isEnabled());
    }
    
    @Test(expected = IllegalStateException.class)
    public void testValidationFailsWithNullName() {
        FarmField field = new FarmField(null, FieldType.QUALITY, FieldShape.CIRCLE);
        field.validate(); // Should throw
    }
    
    @Test
    public void testEqualityByIdOnly() {
        FarmField field1 = new FarmField("A", FieldType.QUALITY, FieldShape.CIRCLE);
        FarmField field2 = new FarmField("B", FieldType.QUANTITY, FieldShape.RECTANGLE);
        field2.setId(field1.getId()); // Same ID
        assertEquals(field1, field2); // Should be equal despite different properties
    }
}
```

## Files to Create/Modify
- **Create**: `test/auto/farming/model/FarmFieldTest.java`
- **Create**: `test/auto/farming/model/FieldGridTest.java`
- **Create**: `test/auto/farming/model/FieldSubdivisionTest.java`
- **Create**: `test/auto/farming/model/TileStateTest.java`
- **Create**: `test/auto/farming/config/ConfigSerializationTest.java`
- **Create**: `test/resources/test-farming-config.json5`

## Dependencies
- All Epic 1 stories (testing code from all previous stories)

## Testing Notes
- Run tests with `ant test` (may need to add test target to build.xml)
- Generate coverage report to verify >80% threshold
- Test both positive and negative cases
- Include performance tests for large field operations

## Definition of Done
- [ ] Code implemented and compiles without errors
- [ ] All acceptance criteria met
- [ ] Tests passing
- [ ] Coverage >80%
- [ ] Code reviewed
- [ ] Committed to feature branch
