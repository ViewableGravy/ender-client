# Story FB-1.9: Create Field Manager Singleton

**Story ID**: FB-1.9  
**Epic**: Epic 1 - Field Data Structures  
**Story Points**: 8  
**Priority**: P0 (Blocker)  
**Status**: Not Started  

## Description
Implement a singleton manager class that provides centralized access to all field data, handles CRUD operations, and integrates with the configuration persistence layer.

## Acceptance Criteria
- [ ] Create `FarmingManager.java` singleton class
- [ ] Implement field CRUD operations:
  - `addField(FarmField field)`
  - `updateField(FarmField field)`
  - `removeField(UUID id)`
  - `getField(UUID id)`
  - `getAllFields()`
- [ ] Maintain in-memory field registry
- [ ] Trigger config save on field changes
- [ ] Provide observable/listener pattern for UI updates
- [ ] Implement `initialize()` method to load config on startup
- [ ] Add `shutdown()` method to save config on exit

## Technical Notes
- Singleton ensures single source of truth for field data
- Use RxJava `Reactor` pattern for change notifications (see existing patterns in codebase)
- Hook into client lifecycle for init/shutdown (see `MainFrame.java`)
- Thread-safe for concurrent access from UI and bot threads

**Example usage**:
```java
// Initialization (during client startup)
FarmingManager.getInstance().initialize();

// Add field
FarmField field = new FarmField("My Field", FieldType.QUANTITY, FieldShape.RECTANGLE);
FarmingManager.getInstance().addField(field);

// Listen for changes
FarmingManager.getInstance().addFieldChangeListener(field -> {
    System.out.println("Field updated: " + field.getName());
});

// Shutdown (during client exit)
FarmingManager.getInstance().shutdown();
```

## Files to Create/Modify
- **Create**: `src/auto/farming/FarmingManager.java`
- **Create**: `src/auto/farming/FieldChangeListener.java` (interface)

## Dependencies
- FB-1.1 (FarmField)
- FB-1.8 (ConfigLoader/ConfigSerializer)

## Testing Notes
- Test singleton instance is truly single
- Test CRUD operations
- Verify listeners are notified on changes
- Test thread safety with concurrent access
- Verify config save/load integration

## Definition of Done
- [ ] Code implemented and compiles without errors
- [ ] All acceptance criteria met
- [ ] Javadoc complete
- [ ] Manual testing completed
- [ ] Code reviewed
- [ ] Committed to feature branch
